>一台Web服务器可搭建多个独立域名的Web网站，也可作为通信路径上的中转服务器提升传输效率

## 使用单台虚拟主机实现多个域名

若`www.tricorder.jp`和`www.hackr.jp`同时部署在同一个服务器上（相同的IP地址），使用DNS服务解析域名后，两者的问IP地址会相同

在相同的IP地址下,由于虚拟主机可以寄存多个不同主机名和域名的Web网站,因此在发送HTTP请求时,必须在Host首部内完整指定主机名或域名的URI

## 通信数据转发程序:代理,网关,隧道

HTTP通信时,除客户端和服务器以外,*还有一些用于通信数据转发的应用程序*，例如**代理、网关和隧道**.它们可以配合服务器工作

这些**应用程序和服务器**可以将请求转发给通信线路上的下一站服务器，并且能接收从那台服务器发送的响应再转发给客户端

### 代理

代理是一种**有转发功能的应用程序**，它扮演了位于服务器和客户端 “中间人”的角色.接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端

**代理服务器**的基本行为就是接收客户端发送的请求后转发给**其他服务器**

代理不改变请求URI，会直接发送给前方持有资源的目标服务器

*持有资源实体的服务器被称为源服务器*。从**源服务器**返回的响应经过**代理服务器**后再传给**客户端**


![](HTTP/attachments/Pasted%20image%2020250124111140.png)
在HTTP通信过程中,可**级联**多台代理服务器。请求和响应的转发会经过数台类似锁链一样连接起来的代理服务器。转发时，**需要附加 Via 首部字段**以标记出经过的主机信息

通过**设置组织内部的代理服务器**可做到**针对特定URI访问的控制**

代理有多种使用方法，按两种基准分类。一种是是否使用缓存，另一种是是否会修改报文

- 缓存代理
	- 代理转发响应时，缓存代理（Caching Proxy）会预先将资源的副本 保存在代理服务器上。当代理再次接收到对相同资源的请求时，就可以不从源服务器那里获取资源，而是将之前缓存的资源作为响应返回
- 透明代理
	- 转发请求或响应时,不对报文做任何加工的代理类型被称为透明代理(Transparent Proxy)。反之，对报文内容进行加工的代理被称为 非透明代理

### 网关

网关是转发其他服务器通信数据的**服务器**,接收从客户端发送来的请求时,它就像自己拥有资源的源服务器一样对请求进行处理
![](HTTP/attachments/Pasted%20image%2020250124112128.png)

网关的工作机制和代理十分相似。而网关能使通信线路上的服务器提供非HTTP协议服务

利用网关能提高通信的安全性,因为可以在客户端与网关之间的通信线路上加密以确保连接的安全

### 隧道

隧道是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方通信连接的**应用程序**

隧道可按要求建立起一条与其他服务器的通信线路，届时使用SSL等加密手段进行通信。隧道的目的是确保客户端能与服务器进行安全的通信

![](HTTP/attachments/Pasted%20image%2020250124112230.png)

## 保存资源的缓存

缓存是指代理服务器和客户端本地磁盘内保存的资源副本

利用缓存可以减少对源服务器的访问,节约了通信流量和通信时间

缓存服务器是代理服务器的一种,并归类在缓存代理类型中.换句话说,当代理转发服务器返回的响应时,代理服务器会保存一份副本在自己的磁盘上

如果请求的资源已经被缓存了就直接从缓存服务器上传输给客户端,避免多次从源服务器上转发资源

可以就近获取资源,不必多次处理相同的请求

### 缓存的有效期限

及时缓存服务器也有期限,也不能返回对同资源的请求,这关系到被缓存的有效性问题

当遇上服务器的资源更新时,如果还是使用不变的缓存,那就会演变成返回更新前的就资源了

及时存在缓存,也会因为客户端的要求,缓存的有效期,想源服务器确认资源的有效性,如果判断为缓存失败,那就会再次从源服务器上获取新资源

### 客户端的缓存

一般浏览器把客户端缓存成为临时网络文件

浏览器缓存如果有效,不必再向浏览器请求相同的资源了,可以直接从本地磁盘读取

另外和缓存浏览器相同的一点是,缓存过期之后会向源服务器确认资源的有效性

>HTTP出现前的协议
1. FTP协议
	传输文件使用的惬意,但是至今仍在广泛使用
2. NNTP::电子会议室内传送消息的协议,在1986年前后出现,属于比较古老的协议,现在利用web交换信息成为主流,所以该协议也不怎么使用了
3. Archie:搜索anonymous FTP公开的文件信息的协议。1990年前后出现，现在已经不常使用
